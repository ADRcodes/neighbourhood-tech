<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Oops! Page Not Found · Neighbourhood Tech</title>
    <style>
      :root {
        --color-brand-base: #dc4966;

        --color-bg: oklch(0.97 0.01 240);
        --color-surface: oklch(from var(--color-bg) max(0, l - 0.04) c h);
        --color-text: oklch(0.20 0.03 260);
        --color-text-muted: oklch(0.44 0.02 260);

        --_chroma-cap: 0.35;

        --color-brand-400: oklch(from var(--color-brand-base)
          clamp(0, l + 0.16, 1)
          min(var(--_chroma-cap), c * 0.85)
          h);
        --color-brand-500: oklch(from var(--color-brand-base) l c h);
        --color-brand-600: oklch(from var(--color-brand-base)
          clamp(0, l - 0.16, 1)
          min(var(--_chroma-cap), c * 1.05)
          h);

        --color-brand-50:  color-mix(in oklch, white 88%, var(--color-brand-500));
        --color-brand-100: color-mix(in oklch, white 76%, var(--color-brand-500));
        --color-brand-200: color-mix(in oklch, white 64%, var(--color-brand-500));
        --color-brand-700: color-mix(in oklch, black 16%, var(--color-brand-600));
        --color-brand-800: color-mix(in oklch, black 24%, var(--color-brand-600));

        --color-brand-complement: oklch(from var(--color-brand-base) l c calc(h + 180));
        --color-accent:            oklch(from var(--color-brand-base) l c calc(h + 35));

        --color-primary:         var(--color-brand-600);
        --color-primary-hover:   var(--color-brand-700);
        --color-primary-subtle:  var(--color-brand-100);

        --color-onprimary: white;
        --color-onaccent: white;
        --color-oncomplement: white;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
        background: var(--color-bg);
        color: var(--color-text);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: clamp(2rem, 3vw, 4rem);
      }

      main {
        width: min(100%, 960px);
        display: grid;
        gap: clamp(2rem, 3vw, 3rem);
      }

      .panel {
        position: relative;
        border-radius: clamp(1.5rem, 3vw, 2.25rem);
        padding: clamp(2.5rem, 4vw, 3.5rem);
        overflow: hidden;
        box-shadow: 0 24px 60px rgba(0, 0, 0, 0.12);
        background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-brand-complement) 55%, var(--color-accent) 100%);
        color: var(--color-onprimary);
      }

      .panel::after {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at 15% 15%, rgba(255, 255, 255, 0.18), transparent 55%),
          radial-gradient(circle at 85% 80%, rgba(255, 255, 255, 0.16), transparent 60%);
        pointer-events: none;
      }

      .panel-content {
        position: relative;
        z-index: 1;
        display: grid;
        gap: 1.5rem;
      }

      .eyebrow {
        font-size: 0.75rem;
        letter-spacing: 0.4em;
        text-transform: uppercase;
        opacity: 0.75;
      }

      .headline {
        font-size: clamp(3.25rem, 8vw, 4.5rem);
        margin: 0;
        font-weight: 650;
      }

      .lead {
        max-width: 44ch;
        font-size: clamp(1rem, 2.2vw, 1.2rem);
        line-height: 1.6;
        margin: 0;
        color: color-mix(in srgb, var(--color-onprimary) 82%, transparent);
      }

      .cta {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        border-radius: 999px;
        padding: 0.85rem 1.6rem;
        font-weight: 600;
        font-size: 0.95rem;
        text-decoration: none;
        color: var(--color-onprimary);
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(12px);
        transition: transform 160ms ease, background 160ms ease;
      }

      .cta:hover {
        transform: translateY(-2px);
        background: rgba(255, 255, 255, 0.18);
      }

      .palette-card {
        border-radius: clamp(1.5rem, 3vw, 2rem);
        background: var(--color-surface);
        padding: clamp(1.75rem, 3vw, 2.5rem);
        box-shadow: 0 20px 45px rgba(30, 30, 30, 0.08);
        display: grid;
        gap: 1.5rem;
      }

      .palette-header {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .palette-title {
        font-size: 1.35rem;
        font-weight: 600;
        margin: 0;
      }

      .palette-copy {
        margin: 0;
        font-size: 0.95rem;
        color: var(--color-text-muted);
        line-height: 1.6;
      }

      .swatch-row {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .swatch {
        flex: 1;
        display: grid;
        gap: 0.25rem;
        text-align: center;
      }

      .swatch-chip {
        width: 100%;
        aspect-ratio: 1 / 1;
        border-radius: clamp(1rem, 2vw, 1.4rem);
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.08);
      }

      .swatch-label {
        font-size: 0.75rem;
        font-weight: 600;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--color-text-muted);
      }

      .picker {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        align-self: flex-start;
        background: var(--color-primary-subtle);
        color: var(--color-text);
        padding: 0.75rem 1rem;
        border-radius: 999px;
        box-shadow: inset 0 0 0 1px var(--color-brand-200);
      }

      .picker span {
        font-size: 0.85rem;
        font-weight: 600;
        letter-spacing: 0.06em;
        text-transform: uppercase;
      }

      .picker input[type="color"] {
        appearance: none;
        border: none;
        width: 2.75rem;
        height: 2.75rem;
        border-radius: 50%;
        cursor: pointer;
        padding: 0;
        background: none;
      }

      .picker input[type="color"]::-webkit-color-swatch-wrapper {
        padding: 0;
        border-radius: 50%;
      }

      .picker input[type="color"]::-webkit-color-swatch {
        border: none;
        border-radius: 50%;
      }

      footer {
        font-size: 0.75rem;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        color: var(--color-text-muted);
        text-align: center;
      }

      @media (max-width: 720px) {
        body {
          padding: 1.75rem;
        }

        .panel {
          padding: 2.25rem;
        }

        .swatch-row {
          flex-direction: column;
        }

        .swatch {
          width: 100%;
          max-width: 220px;
        }

        .picker {
          width: 100%;
          justify-content: space-between;
        }
      }
    </style>
  </head>
  <body>
    <main>
      <section class="panel">
        <div class="panel-content">
          <span class="eyebrow">404 · Stage offline</span>
          <h1 class="headline">The set you’re looking for isn’t live.</h1>
          <p class="lead">
            We couldn’t find that route in the festival program. Try heading back to the main stage or remix the palette below while you’re here.
          </p>
          <a class="cta" href="/">Return to main stage</a>
        </div>
      </section>

      <section class="palette-card">
        <header class="palette-header">
          <p class="eyebrow" style="letter-spacing: 0.3em; color: var(--color-text-muted);">Palette playground</p>
          <h2 class="palette-title">Live brand tokens</h2>
          <p class="palette-copy">
            This 404 is wired into the same dynamic colour system as the app. Pick a new base hue and the primary, accent, and complementary tokens reflow automatically.
          </p>
        </header>

        <div class="swatch-row">
          <div class="swatch">
            <div class="swatch-chip" style="background: var(--color-primary);"></div>
            <span class="swatch-label">Primary</span>
          </div>
          <div class="swatch">
            <div class="swatch-chip" style="background: var(--color-accent);"></div>
            <span class="swatch-label">Accent</span>
          </div>
          <div class="swatch">
            <div class="swatch-chip" style="background: var(--color-brand-complement);"></div>
            <span class="swatch-label">Complement</span>
          </div>
        </div>

        <label class="picker">
          <span>Brand base</span>
          <input type="color" value="#dc4966" data-brand-picker />
        </label>
      </section>

      <footer>Neighbourhood Tech Festival · Always ship with tokens</footer>
    </main>

    <script>
      (function () {
        const root = document.documentElement;
        const picker = document.querySelector("[data-brand-picker]");

        function createProbe(varName) {
          const el = document.createElement("div");
          Object.assign(el.style, {
            position: "fixed",
            inset: "-999px",
            width: "1px",
            height: "1px",
            pointerEvents: "none",
            backgroundColor: `var(${varName})`,
          });
          document.body.appendChild(el);
          const color = getComputedStyle(el).backgroundColor;
          el.remove();
          return color;
        }

        function parseRgb(input) {
          if (!input) return null;
          const match = input.match(/rgba?\\(\\s*([\\d.]+)[,\\s]+([\\d.]+)[,\\s]+([\\d.]+)/i);
          return match ? [Number(match[1]), Number(match[2]), Number(match[3])] : null;
        }

        function srgbToLinear(c) {
          const cs = c / 255;
          return cs <= 0.04045 ? cs / 12.92 : Math.pow((cs + 0.055) / 1.055, 2.4);
        }

        function luminance([r, g, b]) {
          const R = srgbToLinear(r);
          const G = srgbToLinear(g);
          const B = srgbToLinear(b);
          return 0.2126 * R + 0.7152 * G + 0.0722 * B;
        }

        function contrast(a, b) {
          const [L1, L2] = a >= b ? [a, b] : [b, a];
          return (L1 + 0.05) / (L2 + 0.05);
        }

        function pickOnColor(rgb) {
          const lBg = luminance(rgb);
          const lWhite = luminance([255, 255, 255]);
          const lBlack = luminance([0, 0, 0]);
          const cWhite = contrast(lWhite, lBg);
          const cBlack = contrast(lBlack, lBg);
          return cWhite >= cBlack ? "white" : "black";
        }

        function refreshOnTokens() {
          const pairs = [
            ["--color-primary", "--color-onprimary"],
            ["--color-accent", "--color-onaccent"],
            ["--color-brand-complement", "--color-oncomplement"],
          ];

          pairs.forEach(([bgVar, onVar]) => {
            const css = createProbe(bgVar);
            const rgb = parseRgb(css);
            if (rgb) {
              root.style.setProperty(onVar, pickOnColor(rgb));
            }
          });
        }

        function setBrandBase(color) {
          if (!color) return;
          root.style.setProperty("--color-brand-base", color);
          requestAnimationFrame(() => {
            requestAnimationFrame(refreshOnTokens);
          });
        }

        if (picker) {
          picker.addEventListener("input", (event) => {
            setBrandBase(event.target.value);
          });
        }

        // Initial sync
        refreshOnTokens();
      })();
    </script>
  </body>
</html>
